import from: wasi_unstable
  fd_write fd iovec iovec_len num_written

add a b =>
  ~a
  ~b
  !i32.add

store addr value =>
  ~addr
  ~value
  !i32.store

load addr =>
  ~addr
  !i32.load

next ptr => add ~ptr 4

drop => !drop

string.len string => load string
string.ptr string => next string

string.store addr string =
  store addr (string.ptr string)
  store (next addr) (string.len string)
  ()

stdout => 1
iovec => 0
written => (add 8 iovec)
string.store iovec "hello catac!\n"
drop

fd_write stdout iovec 1 written
drop